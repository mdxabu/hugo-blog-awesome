{{ $avatar_img := .Site.Params.author.avatar }}
{{ $avatar_img_alt := or .Site.Params.author.name .Site.Params.author.intro }}
{{ $is_external := or (strings.HasPrefix $avatar_img "http://") (strings.HasPrefix $avatar_img "https://") }}

<div class="author">
    {{ if $is_external }}
        <!-- External image URL -->
        <img class="author-avatar"
             src="{{ $avatar_img }}"
             alt="{{ $avatar_img_alt }}"
             width="300"
             height="300"
             style="width: 300px; height: 300px; border-radius: 50%; object-fit: cover;" />
    {{ else }}
        <!-- Try to load from assets (Hugo Pipes) -->
        {{ $image := resources.Get $avatar_img }}
        {{ with $image }}
            {{ $resized := .Fill "300x300" }}
            <img class="author-avatar"
                 src="{{ $resized.RelPermalink }}"
                 alt="{{ $avatar_img_alt }}"
                 width="{{ $resized.Width }}"
                 height="{{ $resized.Height }}"
                 style="width: 300px; height: 300px; border-radius: 50%; object-fit: cover;" />
        {{ else }}
            <!-- Fallback: use static folder path -->
            <img class="author-avatar"
                 src="{{ $avatar_img }}"
                 alt="{{ $avatar_img_alt }}"
                 width="300"
                 height="300"
                 style="width: 300px; height: 300px; border-radius: 50%; object-fit: cover;" />
        {{ end }}
    {{ end }}

    <h2 class="author-name">{{ .Site.Params.author.intro }}</h2>
    <p class="author-bio">{{ .Site.Params.author.description }}</p>
</div>
